import unittest
import numpy as np

from Orange import data
import Orange.classification.linear_regression as lr

class LinearRegressionTest(unittest.TestCase):

    def test_LinearRegression(self):
        nrows = 1000
        ncols = 3
        x = np.random.random_integers(-20, 50, (nrows, ncols))
        c = np.random.rand(ncols, 1)*10-3
        e = np.random.rand(nrows, 1)-0.5
        y = np.dot(x,c) + e

        x1, x2 = np.split(x,2);
        y1, y2 = np.split(y,2);
        t = data.Table(x1, y1)
        learn = lr.LinearRegressionLearner()
        clf = learn(t)
        z = clf(x2)
        self.assertTrue((abs(z.reshape(-1,1)-y2)<2.0).all())